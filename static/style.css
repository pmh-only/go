*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; }
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  background: #f0f4f8;
  display: flex;
  height: 100vh;
  overflow: hidden;
}

/* ── Left panel ── */
.panel-left {
  width: 380px;
  flex-shrink: 0;
  background: #fff;
  border-right: 1px solid #e2e8f0;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  padding: 2rem 1.75rem;
}
.panel-left h1 { font-size: 1.4rem; color: #1a202c; margin-bottom: .25rem; }
.panel-left .subtitle { color: #718096; font-size: .875rem; margin-bottom: 1.75rem; }
.panel-left input[type="url"],
.panel-left input[type="text"] { font-size: .88rem; padding: .55rem .75rem; }

label.field-label { display: block; font-size: .8rem; font-weight: 600; color: #4a5568; margin-bottom: .35rem; }
.field { margin-bottom: 1rem; }
.hint { display: block; color: #a0aec0; font-size: .74rem; margin-top: .3rem; }
.form-row { display: flex; }
.prefix {
  padding: .65rem .85rem;
  background: #edf2f7;
  border: 1.5px solid #cbd5e0;
  border-right: none;
  border-radius: 7px 0 0 7px;
  color: #718096;
  font-size: .85rem;
  white-space: nowrap;
  align-self: stretch;
  display: flex;
  align-items: center;
}
input[type="url"], input[type="text"] {
  width: 100%;
  padding: .65rem .85rem;
  border: 1.5px solid #cbd5e0;
  border-radius: 7px;
  font-size: .95rem;
  outline: none;
  transition: border-color .15s;
  background: #fff;
}
input[type="text"].alias { border-radius: 0 7px 7px 0; flex: 1; }
input:focus { border-color: #667eea; }

.link-toggles { display: flex; gap: .6rem; }
.link-toggle {
  flex: 1;
  display: flex;
  align-items: center;
  gap: .45rem;
  padding: .55rem .8rem;
  border: 1.5px solid #cbd5e0;
  border-radius: 7px;
  cursor: pointer;
  transition: border-color .15s, background .15s;
  user-select: none;
}
.link-toggle input[type="checkbox"] { display: none; }
.link-toggle .dot {
  width: 12px; height: 12px;
  border-radius: 50%;
  border: 2px solid #cbd5e0;
  flex-shrink: 0;
  transition: background .15s, border-color .15s;
}
.link-toggle .info strong { display: block; font-size: .82rem; color: #4a5568; }
.link-toggle .info small  { font-size: .72rem; color: #a0aec0; font-family: monospace; }
.link-toggle.public.on   { border-color: #63b3ed; background: #ebf8ff; }
.link-toggle.public.on   .dot { background: #3182ce; border-color: #3182ce; }
.link-toggle.public.on   .info strong { color: #2b6cb0; }
.link-toggle.internal.on { border-color: #68d391; background: #f0fff4; }
.link-toggle.internal.on .dot { background: #38a169; border-color: #38a169; }
.link-toggle.internal.on .info strong { color: #276749; }

#toggleErr { color: #c53030; font-size: .78rem; margin-top: .35rem; display: none; }

button.primary {
  width: 100%; padding: .75rem;
  background: #667eea; color: #fff;
  border: none; border-radius: 7px;
  font-size: .95rem; font-weight: 600;
  cursor: pointer; transition: background .15s;
  margin-top: .25rem;
}
button.primary:hover { background: #5a67d8; }

.result {
  margin-top: 1.1rem;
  padding: .9rem 1rem;
  border-radius: 7px;
  font-size: .88rem;
}
.result.success { background: #f0fff4; border: 1.5px solid #9ae6b4; color: #276749; }
.result.error   { background: #fff5f5; border: 1.5px solid #feb2b2; color: #c53030; }
.result .rlabel { font-weight: 700; margin-bottom: .45rem; color: #1a202c; font-size: .82rem; text-transform: uppercase; letter-spacing: .05em; }
.url-row { display: flex; align-items: center; gap: .4rem; margin-bottom: .3rem; }
.url-row a { flex: 1; color: #2b6cb0; word-break: break-all; font-size: .83rem; }

/* ── Right panel ── */
.panel-right {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
.panel-right-header {
  padding: 1.25rem 1.75rem;
  border-bottom: 1px solid #e2e8f0;
  background: #fff;
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-shrink: 0;
}
.panel-right-header h2 { font-size: 1rem; color: #1a202c; }
.panel-right-header .count { font-size: .8rem; color: #a0aec0; }
.search-wrap { position: relative; }
.search-wrap svg { position: absolute; left: .6rem; top: 50%; transform: translateY(-50%); pointer-events: none; color: #a0aec0; }
#searchInput {
  padding: .45rem .75rem .45rem 2rem;
  border: 1.5px solid #e2e8f0;
  border-radius: 7px;
  font-size: .85rem;
  outline: none;
  width: 220px;
  transition: border-color .15s;
  background: #f7fafc;
}
#searchInput:focus { border-color: #667eea; background: #fff; }
.table-wrap { flex: 1; overflow-y: auto; }

table { width: 100%; border-collapse: collapse; font-size: .84rem; }
thead th {
  position: sticky; top: 0;
  background: #f7fafc;
  text-align: left;
  padding: .6rem 1rem;
  color: #718096;
  font-weight: 600;
  font-size: .75rem;
  text-transform: uppercase;
  letter-spacing: .05em;
  border-bottom: 1px solid #e2e8f0;
  white-space: nowrap;
}
tbody tr { border-bottom: 1px solid #f0f4f8; }
tbody tr:hover { background: #f7fafc; }
@keyframes row-highlight { 0%,60% { background: #c6f6d5; } 100% { background: transparent; } }
tr.row-new { animation: row-highlight 2.5s ease forwards; }
td { padding: .65rem 1rem; vertical-align: middle; }
td.td-links { min-width: 220px; }
td.td-original { max-width: 280px; word-break: break-all; }
td.td-date { white-space: nowrap; color: #a0aec0; font-size: .78rem; }

.link-line { display: flex; align-items: center; gap: .3rem; margin-bottom: .18rem; }
.link-line a {
  position: relative;
  color: #2b6cb0; font-size: .82rem; flex: 1; min-width: 0;
  overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
  cursor: copy; text-decoration: none;
}
.link-line a:not(.disabled):hover { text-decoration: underline; }
.link-line a.disabled { color: #a0aec0; text-decoration: line-through; pointer-events: none; cursor: default; }
.link-line a.copied { color: #276749 !important; overflow: visible; }
.link-line a.copied::after {
  content: 'Copied!';
  position: absolute;
  bottom: calc(100% + 5px);
  left: 0;
  background: #1a202c;
  color: #fff;
  font-size: .68rem;
  padding: .15rem .45rem;
  border-radius: 4px;
  white-space: nowrap;
  pointer-events: none;
}
/* ✎ rename button — keep link-copy only for this usage */
.link-copy {
  flex-shrink: 0;
  padding: .1rem .4rem; font-size: .7rem;
  background: #edf2f7; color: #718096;
  border-radius: 4px; border: none; cursor: pointer;
  opacity: 0; transition: opacity .15s;
}
tr:hover .link-copy { opacity: 1; }
.link-copy:hover { background: #e2e8f0; }
.code-row { display: flex; align-items: center; gap: .3rem; margin-bottom: .25rem; }
.code-label { font-family: monospace; font-size: .82rem; font-weight: 600; color: #4a5568; }
.code-edit-row { display: flex; align-items: center; gap: .3rem; margin-bottom: .25rem; }
.code-edit-input {
  font-family: monospace; font-size: .82rem;
  padding: .15rem .4rem; border: 1.5px solid #667eea;
  border-radius: 5px; outline: none; width: 110px;
}

/* shared tag + row-toggle styles */
.url-tag, .row-toggle {
  font-size: .65rem; font-weight: 700;
  padding: .13rem .4rem;
  border-radius: 4px;
  white-space: nowrap;
  text-transform: uppercase;
  letter-spacing: .04em;
  border: none;
  cursor: pointer;
  transition: opacity .15s, filter .15s;
}
.url-tag { cursor: default; }
.row-toggle:hover { filter: brightness(.88); }
.tag-public.on    { background: #bee3f8; color: #2b6cb0; }
.tag-public.off   { background: #e2e8f0; color: #a0aec0; }
.tag-internal.on  { background: #c6f6d5; color: #276749; }
.tag-internal.off { background: #e2e8f0; color: #a0aec0; }

.copy-btn {
  padding: .18rem .55rem; font-size: .75rem;
  background: #edf2f7; color: #4a5568;
  border-radius: 5px; border: none; cursor: pointer; white-space: nowrap;
}
.copy-btn:hover { background: #e2e8f0; }

.action-btn {
  padding: .3rem; font-size: .75rem;
  border-radius: 5px; border: none; cursor: pointer; white-space: nowrap;
  font-weight: 500; display: inline-flex; align-items: center; justify-content: center;
  width: 28px; height: 28px;
}
.btn-qr     { background: #ebf8ff; color: #2b6cb0; }
.btn-qr:hover { background: #bee3f8; }
.btn-edit   { background: #edf2f7; color: #4a5568; }
.btn-edit:hover { background: #e2e8f0; }
.btn-delete { background: #fff5f5; color: #c53030; }
.btn-delete:hover { background: #fed7d7; }
.btn-save   { background: #c6f6d5; color: #276749; }
.btn-save:hover { background: #9ae6b4; }
.btn-cancel { background: #edf2f7; color: #4a5568; }
.btn-cancel:hover { background: #e2e8f0; }
td.td-actions { white-space: nowrap; vertical-align: middle; }
.act-row { display: flex; gap: .25rem; }

.empty-state {
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  height: 100%; color: #a0aec0; gap: .5rem;
  font-size: .9rem;
}
.settings-toggle {
  display: flex; align-items: center; gap: .4rem;
  background: none; border: 1px solid #e2e8f0;
  border-radius: 7px; padding: .45rem .8rem;
  font-size: .82rem; color: #718096; cursor: pointer;
  transition: background .15s;
}
.settings-toggle:hover { background: #f7fafc; }

/* ── Modals ── */
.modal-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, .45);
  align-items: center;
  justify-content: center;
  z-index: 100;
}
.modal-overlay.open { display: flex; }
.modal-box {
  background: #fff;
  border-radius: 10px;
  width: 440px;
  max-width: calc(100vw - 2rem);
  box-shadow: 0 20px 60px rgba(0, 0, 0, .2);
  display: flex;
  flex-direction: column;
}
.modal-box--sm { width: 360px; }
.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.1rem 1.5rem;
  border-bottom: 1px solid #e2e8f0;
}
.modal-header h3 { font-size: .95rem; color: #1a202c; font-weight: 600; }
.modal-close {
  background: none; border: none; cursor: pointer;
  color: #a0aec0; font-size: 1rem; line-height: 1;
  padding: .2rem .4rem; border-radius: 4px;
  transition: color .15s, background .15s;
}
.modal-close:hover { color: #4a5568; background: #f0f4f8; }
.modal-body {
  padding: 1.25rem 1.5rem;
}
.modal-body input[type="url"],
.modal-body input[type="text"] { font-size: .88rem; padding: .55rem .75rem; }
.modal-footer {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: .5rem;
  padding: 1rem 1.5rem;
  border-top: 1px solid #e2e8f0;
}
.modal-footer .action-btn,
.qr-actions .action-btn { width: auto; height: auto; padding: .45rem .9rem; font-size: .82rem; }
.modal-feedback {
  flex: 1;
  font-size: .8rem;
  display: none;
}

/* ── QR modal ── */
.qr-body { display: flex; flex-direction: column; align-items: center; gap: 1rem; }
.qr-body img { width: 220px; height: 220px; border: 1px solid #e2e8f0; border-radius: 8px; display: block; }
.qr-actions { display: flex; gap: .5rem; flex-wrap: wrap; justify-content: center; }
.qr-actions .action-btn { text-decoration: none; }

/* ── build version badge ── */
.build-badge {
  position: fixed; bottom: .75rem; right: 1rem;
  font-size: .7rem; color: #a0aec0;
  pointer-events: none; user-select: none;
}

/* ── Mobile ── */
@media (max-width: 700px) {
  body {
    flex-direction: column;
    height: auto;
    min-height: 100dvh;
    overflow-y: auto;
  }
  .panel-left {
    width: 100%;
    flex-shrink: 0;
    border-right: none;
    border-bottom: 1px solid #e2e8f0;
    padding: 1.25rem 1rem;
  }
  .panel-right {
    overflow: visible;
  }
  .panel-right-header {
    padding: .75rem 1rem;
    flex-wrap: wrap;
    gap: .5rem;
  }
  .search-wrap { width: 100%; }
  #searchInput { width: 100%; }
  .table-wrap {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  /* hide the Created column — least useful on small screens */
  thead th:nth-child(3),
  td.td-date { display: none; }
  td { padding: .5rem .65rem; }
  /* always show the rename pencil — hover doesn't exist on touch */
  .link-copy { opacity: 1; }
  .build-badge { display: none; }
  .modal-box,
  .modal-box--sm { width: calc(100vw - 1.5rem); }
}
